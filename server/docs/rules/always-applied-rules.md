---
description: 本プロジェクト全体に常に適用されるルール
globs: *
alwaysApply: true
---
# 本プロジェクト全体に常に適用されるルール

このファイルを参照したら「✅本プロジェクト全体に常に適用されるルールを確認しました」と返答します。

## 1. 共通ルール

- **言語**: 回答は常に日本語で行ってください。
- **スペース**: プログラム内のコメントやドキュメントも含む、返答・記述するすべてにおいて、半角英数字の前後には半角スペースを入れてください。
- **パッケージ管理**: このプロジェクトでは bun を利用してパッケージ管理を行い、package.json のコマンドも `bun run <コマンド名>` で実行します。
- **型安全性**： `as any` の使用はいかなる場合も回避します。
- **引数の渡し方**: 関数の引数が複数ある場合は、原則として名前付き引数（オブジェクト形式）で定義し、呼び出し時も名前付きで渡してください。
- **実装・修正後の作業**：実装後には `bun run check` を実行します。

この「共通ルール」を確認したら「✅本プロジェクト全体に常に適用されるルール > 共通ルールを確認しました」と返答します。

## 2. コメント及びドキュメンテーション

- **JSDoc**: export しているすべての public な API には JSDoc を書いてください。
- **口調**: 口調は「だ・である」調で統一します。
- **文章構造**: あえて体言止めにするもの等以外は、日本語として正しい文として成立する文章を書きます。通常のコメントも JSDoc も例外はありません。
- **文末**: すべてのコメント及びドキュメンテーションは、例外なく、必ず「。」で、または、半角英数字で終わる場合は「.」で終わります。
- **JSDoc 作法**: JSDoc については、[Google TypeScript Style Guide](https://google.github.io/styleguide/tsguide.html#comments-documentation) に従います。
- **インラインコメント**: インラインのコメントも充実させますが、ある処理の行の末尾に続けて書くタイプのコメントは回避します。その処理の直前の行に書きます。

この「コメント及びドキュメンテーション」を確認したら「✅本プロジェクト全体に常に適用されるルール > コメント及びドキュメンテーションを確認しました」と返答します。

## 3. 実装前に必ず確認するルール

### 3.1 実装ガイド

実装を始める前に、関連する実装ガイドを確認してください。

- [アーキテクチャ](../../docs/rules/architecture.md)
- [スキーマ定義ガイド](../../docs/rules/schema.md)
- [Util 実装ガイド](../../docs/rules/util.md)
- [Handler 実装ガイド](../../docs/rules/handler.md)
- [Handler テスト実装ガイド](../../docs/rules/handler-test.md)
- [UseCase 実装ガイド](../../docs/rules/use-case.md)
- [Repository 実装ガイド](../../docs/rules/repository.md)

### 3.2 実装の進め方

- 上記の実装ガイドを網羅的に確認して実装計画を立てます
- 各レイヤーについて、実装ガイドに従って実装します
- `bun run check` で linter, formatter を実行し、問題があれば修正します
- `bun run test:ci` を実行してテストを実行し、すべて正しくパスすることを確認します
  - 失敗するテストがあれば、テストや関連実装を見直して、修正します。テストが正しく通過するまで繰り返します。
- 再度 `bun run check` で linter, formatter を実行し、問題があれば修正します

実装を始める前に、上記のルールを確認し、不明点があれば質問してください。
